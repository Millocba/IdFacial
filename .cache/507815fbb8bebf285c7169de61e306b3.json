{"dependencies":[{"name":"../common/disposeUnusedWeightTensors","loc":{"line":1,"column":43}},{"name":"../common/extractSeparableConvParamsFactory","loc":{"line":2,"column":47}},{"name":"../common/extractWeightEntryFactory","loc":{"line":3,"column":42}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.extractParamsFromWeigthMap = extractParamsFromWeigthMap;\n\nvar _disposeUnusedWeightTensors = require(\"../common/disposeUnusedWeightTensors\");\n\nvar _extractSeparableConvParamsFactory = require(\"../common/extractSeparableConvParamsFactory\");\n\nvar _extractWeightEntryFactory = require(\"../common/extractWeightEntryFactory\");\n\nfunction extractorsFactory(weightMap, paramMappings) {\n  var extractWeightEntry = (0, _extractWeightEntryFactory.extractWeightEntryFactory)(weightMap, paramMappings);\n  function extractBatchNormParams(prefix) {\n    var sub = extractWeightEntry(prefix + \"/sub\", 1);\n    var truediv = extractWeightEntry(prefix + \"/truediv\", 1);\n    return { sub: sub, truediv: truediv };\n  }\n  function extractConvParams(prefix) {\n    var filters = extractWeightEntry(prefix + \"/filters\", 4);\n    var bias = extractWeightEntry(prefix + \"/bias\", 1);\n    return { filters: filters, bias: bias };\n  }\n  function extractConvWithBatchNormParams(prefix) {\n    var conv = extractConvParams(prefix + \"/conv\");\n    var bn = extractBatchNormParams(prefix + \"/bn\");\n    return { conv: conv, bn: bn };\n  }\n  var extractSeparableConvParams = (0, _extractSeparableConvParamsFactory.loadSeparableConvParamsFactory)(extractWeightEntry);\n  return {\n    extractConvParams: extractConvParams,\n    extractConvWithBatchNormParams: extractConvWithBatchNormParams,\n    extractSeparableConvParams: extractSeparableConvParams\n  };\n}\nfunction extractParamsFromWeigthMap(weightMap, config) {\n  var paramMappings = [];\n  var _a = extractorsFactory(weightMap, paramMappings),\n      extractConvParams = _a.extractConvParams,\n      extractConvWithBatchNormParams = _a.extractConvWithBatchNormParams,\n      extractSeparableConvParams = _a.extractSeparableConvParams;\n  var params;\n  if (config.withSeparableConvs) {\n    var numFilters = config.filterSizes && config.filterSizes.length || 9;\n    params = {\n      conv0: config.isFirstLayerConv2d ? extractConvParams('conv0') : extractSeparableConvParams('conv0'),\n      conv1: extractSeparableConvParams('conv1'),\n      conv2: extractSeparableConvParams('conv2'),\n      conv3: extractSeparableConvParams('conv3'),\n      conv4: extractSeparableConvParams('conv4'),\n      conv5: extractSeparableConvParams('conv5'),\n      conv6: numFilters > 7 ? extractSeparableConvParams('conv6') : undefined,\n      conv7: numFilters > 8 ? extractSeparableConvParams('conv7') : undefined,\n      conv8: extractConvParams('conv8')\n    };\n  } else {\n    params = {\n      conv0: extractConvWithBatchNormParams('conv0'),\n      conv1: extractConvWithBatchNormParams('conv1'),\n      conv2: extractConvWithBatchNormParams('conv2'),\n      conv3: extractConvWithBatchNormParams('conv3'),\n      conv4: extractConvWithBatchNormParams('conv4'),\n      conv5: extractConvWithBatchNormParams('conv5'),\n      conv6: extractConvWithBatchNormParams('conv6'),\n      conv7: extractConvWithBatchNormParams('conv7'),\n      conv8: extractConvParams('conv8')\n    };\n  }\n  (0, _disposeUnusedWeightTensors.disposeUnusedWeightTensors)(weightMap, paramMappings);\n  return { params: params, paramMappings: paramMappings };\n}\n//# sourceMappingURL=extractParamsFromWeigthMap.js.map"},"hash":"977b6198b8824b6e02cd7fd525f2a711"}